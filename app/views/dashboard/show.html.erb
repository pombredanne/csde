<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">

<head>
	<title>Cloud System Deployment and Experiment (CSDE) Tool</title>
	<style type="text/css" media="screen">
    body {
        margin: 0;
        margin-bottom: 25px;
        padding: 0;
        background-color: #f0f0f0;
        font-family: "Lucida Grande", "Bitstream Vera Sans", "Verdana";
        font-size: 13px;
        color: #333;
    }
    h1 {
        font-size: 28px;
        color: #000;
    }
    a {
        color: #03c
    }
    a:hover {
        background-color: #03c;
        color: white;
        text-decoration: none;
    }
    .filename {
        font-style: italic;
    }
    label {
        font-weight: bold;
    }
    #page {
        background-color: #f0f0f0;
        width: 750px;
        margin: 0;
        margin-left: auto;
        margin-right: auto;
    }
    #content {
        float: left;
        background-color: white;
        border: 3px solid #aaa;
        border-top: none;
        padding: 25px;
        width: 700px;
    }
    #header {
 		padding-left: 200px;
        padding-right: 100px;
        background-image: url("assets/aifb_logo.png"), url("assets/fzi_logo.png");
        background-repeat: no-repeat;
        background-position: top left, top right;
        height: 99px;
    }
    #header h1, #header h2 {
        margin: 0
    }
    #header h2 {
        color: #888;
        font-weight: normal;
        font-size: 16px;
    }
    #separator {
        border-top: 1px solid #ccc;
        margin-top: 25px;
        padding-top: 15px;
    }
    #footer {
        clear:left;
        margin-top:1em;
        background:#efefef;
        text-align:center;
        padding:10px;
        font-weight: bold;
    }
	</style>
</head>



<body>
	<div id="page">
		<div id="content">
			<div id="header">
			  <h1>Cloud System Deployment and Experiment (CSDE) Tool</h1>
			  <h2>You&rsquo;re building the cloud. With CSDE.</h2>
			</div>
			
			<div id="separator"></div>
			
			<div id="tabs">
				<ul>
				  	<li><a href="#tabs-1">Configuration</a></li>
					<li><a href="#tabs-2">Monitoring</a></li>
					<li><a href="#tabs-6">Generator</a></li>
		  			<li><a href="#tabs-3">Execution</a></li>
		  			<li><a href="#tabs-4">Credentials</a></li>
		  			<li><a href="#tabs-5">About</a></li>
				</ul>
				
				<!-- Configuration Management -->
				<div id="tabs-1">
					<div style="color: green;">
		          		<p>Chef Server is now <strong>ready</strong>. Click the button below to go to Chef Server.</p>
		          		<button id="go_to_chef_server">Go to Chef Server</button>
				        <script>
				        	var button_go_to_chef_server_opts = {
						    	icons:{
						       		primary:"ui-icon-home"
						        }
						    };
						    $("#go_to_chef_server").button(button_go_to_chef_server_opts);
						    $("#go_to_chef_server").click(function () {
						    	window.open("/chef_server/go_to");
						    });
				        </script>
	      			</div>
	      			
	      			<div style="color: red;">
		          		<p>Click the button below reset Chef Server and terminate all corresponding machines</p>
		          		<button id="reset_chef_server">Reset Chef Server</button>
				        <script>
				        	var button_reset_chef_server_opts = {
						    	icons:{
						       		primary:"ui-icon-power"
						        }
						    };
						    $("#reset_chef_server").button(button_reset_chef_server_opts);
						    $("#reset_chef_server").click(function () {
						    	window.open("/chef_server/reset");
						    });
				        </script>
	      			</div>
				</div>
				
				<!-- Central Monitoring -->
				<div id="tabs-2">
					<p style="color: green">OpsCenter Server is now <strong>ready</strong>. Click the button below to go to OpsCenter Server.</p>
		          	<button id="go_to_opscenter">Go to OpsCenter Server</button>
				    <script>
				    	var button_go_to_opscenter_server_opts = {
							icons:{
						    	primary:"ui-icon-home"
						    }
						};
						$("#go_to_opscenter").button(button_go_to_opscenter_server_opts);
						$("#go_to_opscenter").click(function () {
							window.open("/chef_server/go_to_opscenter");
						});
				    </script>
				    
				    </br>
				    
				    <p style="color: green">Gmetad Server is now <strong>ready</strong>. Click the button below to go to Gmetad Server.</p>
		          	<button id="go_to_gmetad">Go to Gmetad Server</button>
				    <script>
				    	var button_go_to_gmetad_server_opts = {
							icons:{
						    	primary:"ui-icon-home"
						    }
						};
						$("#go_to_gmetad").button(button_go_to_gmetad_server_opts);
						$("#go_to_gmetad").click(function () {
							window.open("/chef_server/go_to_gmetad");
						});
				    </script>
				</div>
				
				
				
				<!-- Experiment Profile Generator -->
				<div id="tabs-6">
					<div id="experiment_profile_generator_accordion">
						<h2><a href="#">Profile Generator for Caching Experiment</a></h2>
						<div id="t1">
							<%= form_tag('benchmark/generate') do %>
								<table>
									<tr>
										<td>
											<%= label_tag "Instance Type", "Instance Type"%>
										</td>
										<td>
											<%= check_box_tag 'instance_medium', 'medium', false %>
											<em>medium</em>
										</td>
										<td>
											<%= check_box_tag 'instance_large', 'large', false %>
											<em>large</em>
										</td>
									</tr>
									
									<tr>
										<td>
											&nbsp;
										</td>
										<td>
											RAM: 3750 MB</br>
											Core(s): 1
										</td>
										<td>
											RAM: 7450 MB</br>
											Core(s): 2
										</td>
									</tr>
									
									<tr>
										<td>
											<%= label_tag "Heap Size", "Heap Size"%>
										</td>
										<td>
											<%= check_box_tag 'heap_low', 'heap_low', false %>
											<em>low</em>
										</td>
										<td>
											<%= check_box_tag 'heap_high', 'heap_high', false %>
											<em>high</em>
										</td>
									</tr>
									
									<tr>
										<td>
											&nbsp;
										</td>
										<td>
											recommended value
										</td>
										<td>
											1,5x of recommended value
										</td>
									</tr>
									
									<tr>
										<td>
											<%= label_tag "Key Cache Size", "Key Cache Size"%>
										</td>
										<td>
											<%= check_box_tag 'key_cache_low', 'key_low', false %>
											<em>low</em>
										</td>
										<td>
											<%= check_box_tag 'key_cache_high', 'key_high', false %>
											<em>high</em>
										</td>
									</tr>
									
									<tr>
										<td>
											&nbsp;
										</td>
										<td>
											5% of Heap
										</td>
										<td>
											10% of Heap
										</td>
									</tr>
									
									<tr>
										<td>
											<%= label_tag "Row Cache Size", "Row Cache Size"%>
										</td>
										<td>
											<%= check_box_tag 'row_cache_low', 'row_low', false %>
											<em>low</em>
										</td>
										<td>
											<%= check_box_tag 'row_cache_high', 'row_high', false %>
											<em>high</em>
										</td>
									</tr>
									
									<tr>
										<td>
											&nbsp;
										</td>
										<td>
											5% of Heap
										</td>
										<td>
											10% of Heap
										</td>
									</tr>
									
									<tr>
										<td>
											<button id="submit_generate_profile" type="submit" data-confirm="Are you sure?">Generate</button>
										</td>
										<td>
											&nbsp;
										</td>
										<td>
											&nbsp;
										</td>
									</tr>
								</table>
								<script>
							    	var button_generate_profile_opts = {
									  	icons:{
									    	primary:"ui-icon-refresh"
									    }
								    };
								    $("#submit_generate_profile").button(button_generate_profile_opts);
			          			</script>				 		
				 			<% end %>
						</div>
					</div>
					<script>
						$("#experiment_profile_generator_accordion").accordion();
					</script>
				</div>


				
				<!-- Automated Benchmark -->
				<div id="tabs-3">
					<div id="benchmark_execution_accordion">
						<h2><a href="#">Profile Execution</a></h2>
						<div id="t2">
							<%= form_tag('benchmark/run') do %>
								<table>
									<tr>
										<td>
											<%= label_tag "URL", "URL"%>
										</td>
										<td>
											<%= text_field_tag "benchmark_profile_url", "https://raw.github.com/lehoanganh/kcsdb/master/initial_db.yaml", size: 70%>
										</td>
									</tr>
									<tr>
										<td>
											<button id="submit_benchmark_profile" type="submit" data-confirm="Are you sure?">Run</button>
										</td>
										<td>
											&nbsp;
										</td>
									</tr>
								</table>
								<script>
							    	var button_benchmark_profile_opts = {
									  	icons:{
									    	primary:"ui-icon-play"
									    }
								    };
								    $("#submit_benchmark_profile").button(button_benchmark_profile_opts);
			          			</script>				 		
				 			<% end %>
						</div>
					</div>	
					<script>
						$("#benchmark_execution_accordion").accordion();
					</script>
				</div>
				
				<!-- Credentials -->
				<div id="tabs-4">
					<div id="aws_credentials_accordion">
						<h2><a href="#">Cloud Credentials</a></h2>
						<div id="aws_credentials">
							<div id="aws_credentials_status_dialog"></div>
							<% if @os == 'ubuntu' %>
								<%= form_tag('/configuration/edit_aws', :remote => true) do %>
						        	<table>
							        	<tr>
								          	<td><%= label_tag "Access Key ID", "Access Key ID" %></td>
								            <td><%= text_field_tag "aws_access_key_id", @aws_access_key_id, size: 55 %></td>
						          		</tr>
						        		<tr>
								          	<td><%= label_tag "Secret Key Access", "Secret Key Access" %></td>
								            <td><%= text_field_tag "aws_secret_access_key", @aws_secret_access_key, size: 55 %></td>
						          		</tr>
						          		<tr>
								          	<td><%= label_tag "Key Pair and Security Group", "Key Pair and Security Group" %></td>
								            <td><%= text_field_tag "key_pair_and_group", @key_pair_name, size: 55 %></td>
						          		</tr>
						          		<tr>
								          	<td><%= label_tag "Notification Email", "Notification Email" %></td>
								            <td><%= text_field_tag "notification_email", @notification_email, size: 55 %></td>
						          		</tr>
						          		<tr>
								          	<td><button id="submit_aws" type="submit">Submit</button></td>
								          	<td>&nbsp;</td>
						          		</tr>
						          		<script>
							          		var button_aws_credentials_opts = {
									        	icons:{
									       			primary:"ui-icon-key"
									        	}
								      		};
								      		$("#submit_aws").button(button_aws_credentials_opts);
											$("#submit_aws").click(function () {
									          	$("#aws_credentials_status_dialog").dialog({
									              title: "AWS Credentials are already updated. Please ensure they are correct!",
									              show: "slide",
									              hide: "puff",
									              height: "0",
									              resizable: false
									          	});
								      		});
						          		</script>
						        	</table>
					      		<% end %>
							<% else %>
								Hello
							<% end %>
							
							
							
							
						</div>
						<script>
							$("#aws_credentials_accordion").accordion();
						</script>
					</div>
				</div>
				
				<!-- About Information -->
				<div id="tabs-5">
					About information here.
				</div>
				
				<!--jQuery Functions-->
			  	<script>
			      $("#tabs").tabs();
			  	</script>
		  	
			      <div id="state_status_dialog">
			        <div style="color: green;"><%= simple_format @status %></div>
			      </div>
			      <script>
			          $("#state_status_dialog").dialog({
			              title:"KCSDB Status",
			              show:"slide",
			              width: "30em",
			              hide:"puff",
			              resizable: false
			          });
			      </script>
			</div>
		</div>
		<div id="footer">
			Copyright &copy; | Version 1.1 | 2013 | <a href="http://aifb.kit.edu/">AIFB</a> | <a href="http://www.fzi.de/">FZI</a></br>
			<a href="mailto:me@lehoanganh.de">Hoang Anh Le</a> | <a href="mailto:Markus.Klems@aifb.uni-karlsruhe.de">Markus Klems</a>
		</div>
	</div>
</body>
</html>
